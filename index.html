<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SE Widget Helper</title>
</head>
<body>
  <header>
    <div class="logo">
      <span class="pulse" aria-hidden="true"></span>
      <h1>SE Widget Helper</h1>
    </div>
    <p class="subtitle">JSON config &rarr; JS boilerplate</p>
    <a href="https://github.com/guinhoshuto/se-widget-helper" target="_blank" rel="noopener noreferrer" class="btn-github" aria-label="GitHub repository">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.64 7.64 0 0 1 2-.27c.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
    </a>
    <button id="btn-help" type="button" class="btn-help" aria-label="How to use">?</button>
  </header>

  <!-- Help Modal -->
  <div id="modal-overlay" class="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-labelledby="modal-title">
      <button id="btn-modal-close" class="btn-modal-close" type="button" aria-label="Close">&times;</button>

      <div class="modal-header">
        <span class="modal-icon">&#9889;</span>
        <h2 id="modal-title">SE Widget Helper</h2>
      </div>

      <p class="modal-desc">
        Automatically generates the JavaScript boilerplate for
        <strong>StreamElements</strong> widgets from the JSON configuration.
      </p>

      <div class="modal-steps">
        <div class="step">
          <span class="step-num">1</span>
          <div>
            <strong>Paste the JSON</strong>
            <p>Open the widget editor on StreamElements, copy the <code>fields</code> object, and paste it in the left panel.</p>
          </div>
        </div>
        <div class="step">
          <span class="step-num">2</span>
          <div>
            <strong>Generated code</strong>
            <p>The JavaScript appears instantly in the right panel with variable declarations and <code>onWidgetLoad</code> / <code>onEventReceived</code> listeners.</p>
          </div>
        </div>
        <div class="step">
          <span class="step-num">3</span>
          <div>
            <strong>Copy and use</strong>
            <p>Click <strong>copy</strong> and paste it directly into your widget's JS. Done!</p>
          </div>
        </div>
      </div>

      <p class="modal-hint">Tip: click <strong>load example</strong> to see a sample JSON in action.</p>
    </div>
  </div>

  <main>
    <section class="panel panel-input">
      <div class="panel-header">
        <h2>json config</h2>
        <button id="btn-example" type="button">load example</button>
      </div>
      <textarea
        id="json-input"
        spellcheck="false"
        placeholder='{ "fieldName": { "type": "number", "value": 5 }, ... }'
      ></textarea>
      <div id="messages" class="messages" role="status" aria-live="polite"></div>
    </section>

    <section class="panel panel-output">
      <div class="panel-header">
        <h2>generated js</h2>
        <button id="btn-copy" type="button">copy</button>
      </div>
      <div class="code-wrap">
        <pre><code id="code-output" class="language-javascript"></code></pre>
      </div>
    </section>
  </main>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
